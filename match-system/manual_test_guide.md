# ÊíÆÂêàÁ≥ªÁµ±ÊâãÂãïÊ∏¨Ë©¶ÊåáÂçó - ÁµÇÁ´ØÊ©üÁâàÊú¨

## üöÄ ÂâçÁΩÆÊ∫ñÂÇô

```bash
# ÂïüÂãïÊúçÂãô
pkill -f match-system 2>/dev/null || true
./match-system &
sleep 2
```

```bash
# Ê∏ÖÁ©∫Ë≥áÊñôÂ∫´ÈáçÊñ∞ÈñãÂßã
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "DELETE FROM MatchLogs; DELETE FROM MatchWagers; ALTER TABLE MatchWagers AUTO_INCREMENT = 1;"
```

```bash
# Ê™¢Êü•ÊúçÂãôÁãÄÊÖã
curl -s http://localhost:8080/api/getwagerslist -X POST -H "Content-Type: application/json" -d '{"Date_S":"2025-01-01","Date_E":"2025-12-31","State":"All","Page":1,"Limit":10}' | jq .
```

---

## üîÑ ÊµÅÁ®ã1ÔºöOrder ‚Üí RejectedÔºàË∂ÖÊôÇÂ§±ÊïàÔºâ

```bash
# Ê≠•È©ü1ÔºöÂâµÂª∫Âá∫Ê¨æÂñÆ
echo "=== ÂâµÂª∫Âá∫Ê¨æÂñÆ WID=1 ==="
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": 10001,"WD_Amount": 1000,"WD_Account": "123456789012345"}' | jq .
```

```bash
# Ê≠•È©ü2ÔºöÈ©óË≠âOrderÁãÄÊÖã
echo "=== È©óË≠âOrderÁãÄÊÖã ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT WID, WD_ID, State, WD_DateTime FROM MatchWagers WHERE WID = 1;"
```

```bash
# Ê≠•È©ü3ÔºöÊ®°Êì¨Ë∂ÖÊôÇÔºà‰øÆÊîπÊôÇÈñìÊà≥ÁÇ∫16ÂàÜÈêòÂâçÔºâ
echo "=== Ê®°Êì¨Ë∂ÖÊôÇ ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "UPDATE MatchWagers SET WD_DateTime = DATE_SUB(NOW(), INTERVAL 16 MINUTE) WHERE WID = 1;"
```

```bash
# Ê≠•È©ü4ÔºöË™øÁî®rejected API
echo "=== Ë™øÁî®rejected API ==="
curl -s -X POST http://localhost:8080/api/rejected -H "Content-Type: application/json" -d '{"WagerID": 1,"Reserve_UserID": 9001}' | jq .
```

```bash
# Ê≠•È©ü5ÔºöÈ©óË≠âRejectedÁãÄÊÖã
echo "=== È©óË≠âRejectedÁãÄÊÖã ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT WID, WD_ID, State, Finish_DateTime FROM MatchWagers WHERE WID = 1;"
```

---

## üîÑ ÊµÅÁ®ã2ÔºöOrder ‚Üí Matching ‚Üí SuccessÔºàÂÆåÊï¥Êàê‰∫§Ôºâ

```bash
# Ê≠•È©ü1ÔºöÂâµÂª∫Âá∫Ê¨æÂñÆ
echo "=== ÂâµÂª∫Âá∫Ê¨æÂñÆ WID=2 ==="
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": 20001,"WD_Amount": 5000,"WD_Account": "987654321098765"}' | jq .
```

```bash
# Ê≠•È©ü2ÔºöÈ†êÁ¥ÑÂÖ•Ê¨æÔºàÊíÆÂêàÔºâ
echo "=== È†êÁ¥ÑÂÖ•Ê¨æÊíÆÂêà ==="
curl -s -X POST http://localhost:8080/api/reserve -H "Content-Type: application/json" -d '{"Reserve_UserID": 8001,"Reserve_Amount": 5000}' | jq .
```

```bash
# Ê≠•È©ü3ÔºöÈ©óË≠âMatchingÁãÄÊÖã
echo "=== È©óË≠âMatchingÁãÄÊÖã ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT WID, WD_ID, State, Reserve_UserID, Reserve_DateTime FROM MatchWagers WHERE WID = 2;"
```

```bash
# Ê≠•È©ü4ÔºöÁ¢∫Ë™çÊàê‰∫§
echo "=== Á¢∫Ë™çÊàê‰∫§ ==="
curl -s -X POST http://localhost:8080/api/success -H "Content-Type: application/json" -d '{"WagerID": 2,"Reserve_UserID": 8001,"DEP_ID": 30001,"DEP_Amount": 5000}' | jq .
```

```bash
# Ê≠•È©ü5ÔºöÈ©óË≠âSuccessÁãÄÊÖã
echo "=== È©óË≠âSuccessÁãÄÊÖã ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT WID, WD_ID, State, DEP_ID, DEP_Amount, Finish_DateTime FROM MatchWagers WHERE WID = 2;"
```

---

## üîÑ ÊµÅÁ®ã3ÔºöOrder ‚Üí Matching ‚Üí CancelÔºàÂèñÊ∂àÊíÆÂêàÔºâ

```bash
# Ê≠•È©ü1ÔºöÂâµÂª∫Âá∫Ê¨æÂñÆ
echo "=== ÂâµÂª∫Âá∫Ê¨æÂñÆ WID=3 ==="
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": 30001,"WD_Amount": 10000,"WD_Account": "111122223333444"}' | jq .
```

```bash
# Ê≠•È©ü2ÔºöÈ†êÁ¥ÑÂÖ•Ê¨æÔºàÊíÆÂêàÔºâ
echo "=== È†êÁ¥ÑÂÖ•Ê¨æÊíÆÂêà ==="
curl -s -X POST http://localhost:8080/api/reserve -H "Content-Type: application/json" -d '{"Reserve_UserID": 7001,"Reserve_Amount": 10000}' | jq .
```

```bash
# Ê≠•È©ü3ÔºöÂèñÊ∂àÊíÆÂêà
echo "=== ÂèñÊ∂àÊíÆÂêà ==="
curl -s -X POST http://localhost:8080/api/cancel -H "Content-Type: application/json" -d '{"WagerID": 3,"Reserve_UserID": 7001}' | jq .
```

```bash
# Ê≠•È©ü4ÔºöÈ©óË≠âCancelÁãÄÊÖã
echo "=== È©óË≠âCancelÁãÄÊÖã ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT WID, WD_ID, State, Finish_DateTime FROM MatchWagers WHERE WID = 3;"
```

---

## üìä Êü•Ë©¢APIÊ∏¨Ë©¶

```bash
# ÂßîË®óÂñÆÂàóË°®Êü•Ë©¢ÔºàÂÖ®ÈÉ®Ôºâ
echo "=== ÂßîË®óÂñÆÂàóË°®Êü•Ë©¢ÔºàÂÖ®ÈÉ®Ôºâ ==="
curl -s -X POST http://localhost:8080/api/getwagerslist -H "Content-Type: application/json" -d '{"Date_S": "2025-01-01","Date_E": "2025-12-31","State": "All","Page": 1,"Limit": 10}' | jq .
```

```bash
# Êü•Ë©¢ÁâπÂÆöÁãÄÊÖãÔºàOrderÔºâ
echo "=== Êü•Ë©¢OrderÁãÄÊÖã ==="
curl -s -X POST http://localhost:8080/api/getwagerslist -H "Content-Type: application/json" -d '{"Date_S": "2025-01-01","Date_E": "2025-12-31","State": "Order","Page": 1,"Limit": 5}' | jq .
```

```bash
# Êü•Ë©¢ÊíÆÂêà‰∏≠ÂàóË°®
echo "=== Êü•Ë©¢ÊíÆÂêà‰∏≠ÂàóË°® ==="
curl -s -X POST http://localhost:8080/api/getmatchinglist -H "Content-Type: application/json" -d '{"Page": 1,"Limit": 10}' | jq .
```

```bash
# Êü•Ë©¢Â§±ÊïàÂñÆÂàóË°®
echo "=== Êü•Ë©¢Â§±ÊïàÂñÆÂàóË°® ==="
curl -s -X POST http://localhost:8080/api/getrejectedlist -H "Content-Type: application/json" -d '{"Page": 1,"Limit": 10}' | jq .
```

---

## ‚ùå ÈåØË™§ËôïÁêÜÊ∏¨Ë©¶

```bash
# Order API - ÈáëÈ°ç‰∏çÁ¨¶ÂêàË¶èÂÆö
echo "=== Ê∏¨Ë©¶ÈáëÈ°çÈåØË™§ÔºàÊáâË©≤ÂõûÂÇ≥10005Ôºâ ==="
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": 40001,"WD_Amount": 999,"WD_Account": "123456789012345"}' | jq .
```

```bash
# Order API - Â∏≥Êà∂Ê†ºÂºèÈåØË™§
echo "=== Ê∏¨Ë©¶Â∏≥Êà∂Ê†ºÂºèÈåØË™§ÔºàÊáâË©≤ÂõûÂÇ≥10004Ôºâ ==="
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": 40002,"WD_Amount": 1000,"WD_Account": "123abc"}' | jq .
```

```bash
# Order API - Êï∏Â≠óÂ≠ó‰∏≤Ê∏¨Ë©¶ÔºàÊ≠£Â∏∏Ë°åÁÇ∫ÔºöÊúÉË¢´Êé•Âèó‰∏¶ËΩâÊèõÔºâ
echo "=== Ê∏¨Ë©¶Êï∏Â≠óÂ≠ó‰∏≤ÔºàÊúÉË¢´Êé•Âèó‰∏¶ËΩâÊèõÁÇ∫Êï¥Êï∏Ôºâ ==="
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": "40003","WD_Amount": 1000,"WD_Account": "123456789012345"}' | jq .
```

```bash
# Order API - ÁÑ°ÊïàÂ≠ó‰∏≤Ê∏¨Ë©¶
echo "=== Ê∏¨Ë©¶ÁÑ°ÊïàÂ≠ó‰∏≤ÔºàÊáâË©≤ÂõûÂÇ≥10001Ôºâ ==="
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": "abc","WD_Amount": 1000,"WD_Account": "123456789012345"}' | jq .
```

```bash
# Reserve API - ÈáëÈ°ç‰∏çÁ¨¶ÂêàË¶èÂÆö
echo "=== Ê∏¨Ë©¶È†êÁ¥ÑÈáëÈ°çÈåØË™§ÔºàÊáâË©≤ÂõûÂÇ≥10013Ôºâ ==="
curl -s -X POST http://localhost:8080/api/reserve -H "Content-Type: application/json" -d '{"Reserve_UserID": 5001,"Reserve_Amount": 888}' | jq .
```

```bash
# Success API - ‰∏çÂ≠òÂú®ÁöÑWagerID
echo "=== Ê∏¨Ë©¶‰∏çÂ≠òÂú®ÁöÑWagerIDÔºàÊáâË©≤ÂõûÂÇ≥10025Ôºâ ==="
curl -s -X POST http://localhost:8080/api/success -H "Content-Type: application/json" -d '{"WagerID": 99999,"Reserve_UserID": 5001,"DEP_ID": 50001,"DEP_Amount": 1000}' | jq .
```

```bash
# Cancel API - ‰∏çÂ≠òÂú®ÁöÑWagerID
echo "=== Ê∏¨Ë©¶‰∏çÂ≠òÂú®ÁöÑWagerIDÔºàÊáâË©≤ÂõûÂÇ≥10033Ôºâ ==="
curl -s -X POST http://localhost:8080/api/cancel -H "Content-Type: application/json" -d '{"WagerID": 99999,"Reserve_UserID": 5001}' | jq .
```

```bash
# Êó•ÊúüÊ†ºÂºèÈåØË™§Ê∏¨Ë©¶
echo "=== Ê∏¨Ë©¶Êó•ÊúüÊ†ºÂºèÈåØË™§ÔºàÊáâË©≤ÂõûÂÇ≥10041Ôºâ ==="
curl -s -X POST http://localhost:8080/api/getwagerslist -H "Content-Type: application/json" -d '{"Date_S": "2024-13-01","Date_E": "2024-01-31","State": "All","Page": 1,"Limit": 10}' | jq .
```

---

## üîç Ë≥áÊñôÂ∫´ÁãÄÊÖãÊ™¢Êü•

```bash
# Êü•ÁúãÊâÄÊúâÂßîË®óÂñÆÁãÄÊÖã
echo "=== ÊâÄÊúâÂßîË®óÂñÆÁãÄÊÖã ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT WID, WD_ID, State, WD_Amount, WD_Account, Reserve_UserID, DEP_ID, DEP_Amount, WD_DateTime, Reserve_DateTime, Finish_DateTime FROM MatchWagers ORDER BY WID;"
```

```bash
# Êü•ÁúãÁãÄÊÖãÁµ±Ë®à
echo "=== ÁãÄÊÖãÁµ±Ë®à ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT State, COUNT(*) as Count FROM MatchWagers GROUP BY State;"
```

```bash
# Êü•ÁúãÊó•Ë™åË®òÈåÑ
echo "=== Êó•Ë™åË®òÈåÑ ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT ID, WID, WD_ID, State, AddDateTime FROM MatchLogs ORDER BY ID;"
```

---

## üéØ ‰∏ÄÈçµÂü∑Ë°åÂÆåÊï¥Ê∏¨Ë©¶

```bash
# ÂÆåÊï¥Ê∏¨Ë©¶ÊµÅÁ®ã - ‰∏ÄÊ¨°Âü∑Ë°åÊâÄÊúâ‰∏ªË¶ÅÂäüËÉΩ
echo "=== ÈñãÂßãÂÆåÊï¥Ê∏¨Ë©¶ ==="

# Ê∏ÖÁ©∫‰∏¶ÈáçÂïü
pkill -f match-system 2>/dev/null || true
./match-system &
sleep 2
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "DELETE FROM MatchLogs; DELETE FROM MatchWagers; ALTER TABLE MatchWagers AUTO_INCREMENT = 1;"

# ÊµÅÁ®ã1: Order ‚Üí Rejected
echo "ÊµÅÁ®ã1: Order ‚Üí Rejected"
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": 10001,"WD_Amount": 1000,"WD_Account": "123456789012345"}' | jq .
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "UPDATE MatchWagers SET WD_DateTime = DATE_SUB(NOW(), INTERVAL 16 MINUTE) WHERE WID = 1;"
curl -s -X POST http://localhost:8080/api/rejected -H "Content-Type: application/json" -d '{"WagerID": 1,"Reserve_UserID": 9001}' | jq .

# ÊµÅÁ®ã2: Order ‚Üí Matching ‚Üí Success
echo "ÊµÅÁ®ã2: Order ‚Üí Matching ‚Üí Success"
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": 20001,"WD_Amount": 5000,"WD_Account": "987654321098765"}' | jq .
curl -s -X POST http://localhost:8080/api/reserve -H "Content-Type: application/json" -d '{"Reserve_UserID": 8001,"Reserve_Amount": 5000}' | jq .
curl -s -X POST http://localhost:8080/api/success -H "Content-Type: application/json" -d '{"WagerID": 2,"Reserve_UserID": 8001,"DEP_ID": 30001,"DEP_Amount": 5000}' | jq .

# ÊµÅÁ®ã3: Order ‚Üí Matching ‚Üí Cancel
echo "ÊµÅÁ®ã3: Order ‚Üí Matching ‚Üí Cancel"
curl -s -X POST http://localhost:8080/api/order -H "Content-Type: application/json" -d '{"WD_ID": 30001,"WD_Amount": 10000,"WD_Account": "111122223333444"}' | jq .
curl -s -X POST http://localhost:8080/api/reserve -H "Content-Type: application/json" -d '{"Reserve_UserID": 7001,"Reserve_Amount": 10000}' | jq .
curl -s -X POST http://localhost:8080/api/cancel -H "Content-Type: application/json" -d '{"WagerID": 3,"Reserve_UserID": 7001}' | jq .

# ÊúÄÁµÇÁãÄÊÖãÊ™¢Êü•
echo "=== ÊúÄÁµÇÁãÄÊÖãÊ™¢Êü• ==="
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT WID, WD_ID, State, WD_Amount FROM MatchWagers ORDER BY WID;"
docker exec e7cc3c069e3e mysql -u root -proot1234 match_system -e "SELECT State, COUNT(*) as Count FROM MatchWagers GROUP BY State;"

echo "=== Ê∏¨Ë©¶ÂÆåÊàêÔºÅÊáâË©≤Êúâ1ÂÄãRejected„ÄÅ1ÂÄãSuccess„ÄÅ1ÂÄãCancel ==="
```

---

## üìã È†êÊúüÁµêÊûúÊ™¢Êü•

ÂÆåÊàêÊ∏¨Ë©¶ÂæåÔºå‰Ω†ÊáâË©≤ÁúãÂà∞Ôºö

**ÁãÄÊÖãÁµ±Ë®àÁµêÊûúÔºö**
```
State     | Count
----------|------
Rejected  |   1
Success   |   1  
Cancel    |   1
```

**ÈåØË™§Á¢ºÂ∞çÁÖßÔºö**
- 10004: Â∏≥Êà∂Ê†ºÂºèÈåØË™§
- 10005: ÈáëÈ°ç‰∏çÁ¨¶ÂêàË¶èÂÆö
- 10013: È†êÁ¥ÑÈáëÈ°çÈåØË™§
- 10025: Success APIÊâæ‰∏çÂà∞Ë≥áÊñô
- 10033: Cancel APIÊâæ‰∏çÂà∞Ë≥áÊñô
- 10041: Êó•ÊúüÊ†ºÂºèÈåØË™§ 